<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Balancing System - Use Case</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 1600px;
            margin: 0 auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #11998e;
            margin-bottom: 10px;
            font-size: 36px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 18px;
            font-weight: 600;
        }
        
        .flow-section {
            margin: 30px 0;
            padding: 25px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            border-left: 6px solid #11998e;
        }
        
        .flow-title {
            font-size: 22px;
            font-weight: bold;
            color: #11998e;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .step-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .step {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            align-items: flex-start;
            gap: 20px;
            transition: transform 0.2s;
        }
        
        .step:hover {
            transform: translateX(10px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }
        
        .step-number {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .step-content {
            flex: 1;
        }
        
        .step-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }
        
        .step-description {
            color: #666;
            line-height: 1.6;
        }
        
        .arrow {
            text-align: center;
            font-size: 30px;
            color: #11998e;
            margin: 10px 0;
        }
        
        .button-demo {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            margin: 5px;
            border: 2px solid;
        }
        
        .btn-solar {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #333;
            border-color: #FF8C00;
        }
        
        .btn-wind {
            background: linear-gradient(135deg, #87CEEB 0%, #4682B4 100%);
            color: white;
            border-color: #4169E1;
        }
        
        .balance-visual {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            padding: 30px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .balance-item {
            text-align: center;
            flex: 1;
        }
        
        .balance-icon {
            font-size: 60px;
            margin-bottom: 10px;
        }
        
        .balance-label {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .balance-value {
            font-size: 28px;
            font-weight: bold;
            color: #11998e;
        }
        
        .vs-symbol {
            font-size: 40px;
            color: #999;
            font-weight: bold;
        }
        
        .status-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .status-unbalanced {
            background: #ffebee;
            color: #c62828;
            border: 2px solid #ef5350;
        }
        
        .status-balanced {
            background: #e8f5e9;
            color: #2e7d32;
            border: 2px solid #66bb6a;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-top: 4px solid #11998e;
        }
        
        .feature-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }
        
        .feature-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .feature-desc {
            color: #666;
            line-height: 1.6;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
        }
        
        .highlight-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .highlight-text {
            font-size: 18px;
            line-height: 1.8;
        }
        
        .code-box {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            overflow-x: auto;
        }
        
        .code-comment {
            color: #6a9955;
        }
        
        .code-keyword {
            color: #569cd6;
        }
        
        .code-string {
            color: #ce9178;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÑ Interactive Energy Balancing System</h1>
        <p class="subtitle">Smart Auto-Balancing: User Inputs ‚Üí System Adjusts ‚Üí 100% Renewable by 2045</p>
        
        <div class="highlight-box">
            <div class="highlight-title">üéØ Core Concept</div>
            <div class="highlight-text">
                User changes demand ‚Üí System detects imbalance ‚Üí Click Solar/Wind button ‚Üí 
                System automatically adjusts land use ‚Üí Perfect balance achieved! ‚ö°
            </div>
        </div>
        
        <!-- STEP-BY-STEP FLOW -->
        <div class="flow-section">
            <div class="flow-title">
                <span>üìã</span>
                Complete User Interaction Flow
            </div>
            
            <div class="step-container">
                <!-- Step 1 -->
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-title">üñ±Ô∏è User Edits Demand Data</div>
                        <div class="step-description">
                            <strong>What user can edit:</strong>
                            <ul>
                                <li>üè≠ <strong>Specific Demand Categories</strong> (selected Verbrauch codes)</li>
                                <li>üìä Change status values (current demand)</li>
                                <li>üéØ Change target values (2045 demand projection)</li>
                            </ul>
                            <strong>Example:</strong> User increases industrial demand from 50,000 MWh to 65,000 MWh
                        </div>
                    </div>
                </div>
                
                <div class="arrow">‚¨áÔ∏è</div>
                
                <!-- Step 2 -->
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-title">üñ±Ô∏è User Edits Land Use Data</div>
                        <div class="step-description">
                            <strong>What user can edit:</strong>
                            <ul>
                                <li>üåç <strong>Land Use Categories</strong> (hectares for different purposes)</li>
                                <li>Change current land allocation</li>
                                <li>Change 2045 land use targets</li>
                            </ul>
                            <strong>Example:</strong> User reduces agricultural land from 10,000 ha to 8,000 ha
                        </div>
                    </div>
                </div>
                
                <div class="arrow">‚¨áÔ∏è</div>
                
                <!-- Step 3 -->
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-title">‚öôÔ∏è System Recalculates Everything</div>
                        <div class="step-description">
                            <strong>Automatic calculations:</strong>
                            <ul>
                                <li>üî¢ All formulas re-evaluated</li>
                                <li>üìä Total demand calculated: <strong>SUM(all Verbrauch codes)</strong></li>
                                <li>‚ö° Total renewable supply calculated: <strong>SUM(Section 10 codes)</strong></li>
                                <li>üßÆ Formulas like "9.2.1.3 * 9.2.1.3.1%" executed</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="arrow">‚¨áÔ∏è</div>
                
                <!-- Step 4 -->
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <div class="step-title">üìä Bilanz (Balance Sheet) Displayed</div>
                        <div class="step-description">
                            <strong>Balance calculation shows:</strong>
                            <div class="balance-visual">
                                <div class="balance-item">
                                    <div class="balance-icon">‚ö°</div>
                                    <div class="balance-label">Renewable Supply</div>
                                    <div class="balance-value">85,000 MWh</div>
                                </div>
                                <div class="vs-symbol">VS</div>
                                <div class="balance-item">
                                    <div class="balance-icon">üè≠</div>
                                    <div class="balance-label">Total Demand</div>
                                    <div class="balance-value">100,000 MWh</div>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div class="status-badge status-unbalanced">
                                    ‚ö†Ô∏è UNBALANCED: Deficit of 15,000 MWh (15% short)
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="arrow">‚¨áÔ∏è</div>
                
                <!-- Step 5 -->
                <div class="step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <div class="step-title">üîò User Clicks Balance Button</div>
                        <div class="step-description">
                            <strong>Two balancing options available:</strong>
                            <div style="margin: 15px 0;">
                                <span class="button-demo btn-solar">‚òÄÔ∏è Balance with Solar</span>
                                <span class="button-demo btn-wind">üí® Balance with Wind</span>
                            </div>
                            <strong>User decision:</strong> Which renewable source should be increased to meet demand?
                        </div>
                    </div>
                </div>
                
                <div class="arrow">‚¨áÔ∏è</div>
                
                <!-- Step 6 -->
                <div class="step">
                    <div class="step-number">6</div>
                    <div class="step-content">
                        <div class="step-title">ü§ñ System Auto-Adjusts Land Use</div>
                        <div class="step-description">
                            <strong>If user clicked "Balance with Solar" ‚òÄÔ∏è:</strong>
                            <div class="code-box">
<span class="code-comment">// Calculate required land increase</span>
deficit = total_demand - renewable_supply  <span class="code-comment">// 15,000 MWh</span>
solar_efficiency = 0.15  <span class="code-comment">// 150 kWh per m¬≤ per year</span>
required_hectares = deficit / (solar_efficiency * 10000)  <span class="code-comment">// ~10 ha</span>

<span class="code-comment">// Find solar land use code (e.g., "222.1")</span>
solar_landuse.target_ha += required_hectares
<span class="code-comment">// Solar land: 100 ha ‚Üí 110 ha</span>

<span class="code-comment">// Recalculate solar production</span>
solar_production = solar_landuse.target_ha * solar_efficiency * 10000
<span class="code-comment">// New production: 110 ha * 1500 MWh/ha = 165,000 MWh total</span>
                            </div>
                            
                            <strong>If user clicked "Balance with Wind" üí®:</strong>
                            <div class="code-box">
<span class="code-comment">// Calculate required wind capacity</span>
deficit = 15000  <span class="code-comment">// MWh</span>
wind_capacity_factor = 0.25  <span class="code-comment">// 25% efficiency</span>
turbine_capacity = 3  <span class="code-comment">// MW per turbine</span>
turbines_needed = deficit / (turbine_capacity * 8760 * wind_capacity_factor)

<span class="code-comment">// Adjust wind land use</span>
land_per_turbine = 0.5  <span class="code-comment">// hectares</span>
wind_landuse.target_ha += turbines_needed * land_per_turbine
<span class="code-comment">// Wind land: 50 ha ‚Üí 53 ha</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="arrow">‚¨áÔ∏è</div>
                
                <!-- Step 7 -->
                <div class="step">
                    <div class="step-number">7</div>
                    <div class="step-content">
                        <div class="step-title">üîÑ System Recalculates Again</div>
                        <div class="step-description">
                            <ul>
                                <li>‚úÖ Land use updated automatically</li>
                                <li>‚úÖ Solar/Wind production formulas re-executed</li>
                                <li>‚úÖ Section 10 (Endenergieangebot) recalculated</li>
                                <li>‚úÖ New balance computed</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="arrow">‚¨áÔ∏è</div>
                
                <!-- Step 8 -->
                <div class="step">
                    <div class="step-number">8</div>
                    <div class="step-content">
                        <div class="step-title">‚úÖ Perfect Balance Achieved!</div>
                        <div class="step-description">
                            <strong>New balance:</strong>
                            <div class="balance-visual">
                                <div class="balance-item">
                                    <div class="balance-icon">‚ö°</div>
                                    <div class="balance-label">Renewable Supply</div>
                                    <div class="balance-value">100,000 MWh</div>
                                </div>
                                <div class="vs-symbol">=</div>
                                <div class="balance-item">
                                    <div class="balance-icon">üè≠</div>
                                    <div class="balance-label">Total Demand</div>
                                    <div class="balance-value">100,000 MWh</div>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div class="status-badge status-balanced">
                                    ‚úÖ PERFECTLY BALANCED: 100% Renewable Energy by 2045!
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="arrow">‚¨áÔ∏è</div>
                
                <!-- Step 9 -->
                <div class="step">
                    <div class="step-number">9</div>
                    <div class="step-content">
                        <div class="step-title">üëÅÔ∏è User Views Updated Data</div>
                        <div class="step-description">
                            <strong>User can now see:</strong>
                            <ul>
                                <li>üìä Updated renewable energy page with new values</li>
                                <li>üåç Updated land use allocations</li>
                                <li>üìà Charts showing new production levels</li>
                                <li>üíæ Option to save this scenario</li>
                                <li>üîÅ Option to try different adjustments</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- KEY FEATURES -->
        <div class="flow-section">
            <div class="flow-title">
                <span>‚≠ê</span>
                Key Features of the Balancing System
            </div>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">‚úèÔ∏è</div>
                    <div class="feature-title">Selective Editing</div>
                    <div class="feature-desc">
                        Users can only edit specific demand categories (not all Verbrauch data) and land use data. This prevents unrealistic scenarios while allowing meaningful exploration.
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">‚öñÔ∏è</div>
                    <div class="feature-title">Real-Time Balance Detection</div>
                    <div class="feature-desc">
                        System instantly calculates the gap between renewable supply and demand. Shows deficit (undersupply) or surplus (oversupply) with percentages.
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">ü§ñ</div>
                    <div class="feature-title">Intelligent Auto-Adjustment</div>
                    <div class="feature-desc">
                        One-click balancing! System automatically calculates exact land use changes needed for solar or wind to perfectly match demand.
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üåû</div>
                    <div class="feature-title">Solar Balancing</div>
                    <div class="feature-desc">
                        Increases/decreases solar panel land use (e.g., code 222.1) based on solar efficiency formulas. Updates production calculations automatically.
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üí®</div>
                    <div class="feature-title">Wind Balancing</div>
                    <div class="feature-desc">
                        Adjusts wind turbine land allocation based on wind capacity factors. Considers turbine density and efficiency to calculate required hectares.
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <div class="feature-title">2045 Target Planning</div>
                    <div class="feature-desc">
                        All adjustments work for both current (status) and 2045 (target) values. Helps plan long-term transition to 100% renewable energy.
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üîÑ</div>
                    <div class="feature-title">Iterative Exploration</div>
                    <div class="feature-desc">
                        Users can make changes, balance, view results, then make more changes. Supports "what-if" scenario exploration without losing previous work.
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üíæ</div>
                    <div class="feature-title">Scenario Saving</div>
                    <div class="feature-desc">
                        Save balanced scenarios with custom names. Compare multiple scenarios side-by-side to evaluate different renewable energy strategies.
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <div class="feature-title">Visual Feedback</div>
                    <div class="feature-desc">
                        Clear visual indicators show balance status. Green = balanced, Red = unbalanced. Charts update in real-time to show effects of changes.
                    </div>
                </div>
            </div>
        </div>
        
        <!-- DATA FLOW DIAGRAM -->
        <div class="flow-section">
            <div class="flow-title">
                <span>üîÑ</span>
                Data Flow & Calculations
            </div>
            
            <div style="background: white; padding: 25px; border-radius: 10px; margin-top: 20px;">
                <svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
                    <!-- User Input Section -->
                    <rect x="50" y="50" width="200" height="100" fill="#E3F2FD" stroke="#1976D2" stroke-width="3" rx="10"/>
                    <text x="150" y="90" text-anchor="middle" font-weight="bold" font-size="16" fill="#1565C0">User Input</text>
                    <text x="150" y="110" text-anchor="middle" font-size="14" fill="#333">Edits Demand</text>
                    <text x="150" y="130" text-anchor="middle" font-size="14" fill="#333">Edits Land Use</text>
                    
                    <!-- Arrow -->
                    <path d="M 250 100 L 350 100" stroke="#11998e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    
                    <!-- Database -->
                    <rect x="350" y="50" width="200" height="100" fill="#FFF3E0" stroke="#F57C00" stroke-width="3" rx="10"/>
                    <text x="450" y="90" text-anchor="middle" font-weight="bold" font-size="16" fill="#E65100">Database</text>
                    <text x="450" y="110" text-anchor="middle" font-size="14" fill="#333">Verbrauch Data</text>
                    <text x="450" y="130" text-anchor="middle" font-size="14" fill="#333">Land Use Data</text>
                    
                    <!-- Arrow -->
                    <path d="M 550 100 L 650 100" stroke="#11998e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    
                    <!-- Formula Engine -->
                    <rect x="650" y="50" width="200" height="100" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="3" rx="10"/>
                    <text x="750" y="90" text-anchor="middle" font-weight="bold" font-size="16" fill="#6A1B9A">Formula Engine</text>
                    <text x="750" y="110" text-anchor="middle" font-size="14" fill="#333">Calculate Supply</text>
                    <text x="750" y="130" text-anchor="middle" font-size="14" fill="#333">Calculate Demand</text>
                    
                    <!-- Arrow down -->
                    <path d="M 750 150 L 750 220" stroke="#11998e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    
                    <!-- Balance Calculator -->
                    <rect x="650" y="220" width="200" height="100" fill="#E8F5E9" stroke="#388E3C" stroke-width="3" rx="10"/>
                    <text x="750" y="260" text-anchor="middle" font-weight="bold" font-size="16" fill="#2E7D32">Balance Calculator</text>
                    <text x="750" y="280" text-anchor="middle" font-size="14" fill="#333">Supply - Demand</text>
                    <text x="750" y="300" text-anchor="middle" font-size="14" fill="#333">= Deficit/Surplus</text>
                    
                    <!-- Arrow down -->
                    <path d="M 750 320 L 750 390" stroke="#11998e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    
                    <!-- Bilanz Display -->
                    <rect x="650" y="390" width="200" height="100" fill="#FFF9C4" stroke="#F57F17" stroke-width="3" rx="10"/>
                    <text x="750" y="430" text-anchor="middle" font-weight="bold" font-size="16" fill="#F57F17">Bilanz Display</text>
                    <text x="750" y="450" text-anchor="middle" font-size="14" fill="#333">Show Balance</text>
                    <text x="750" y="470" text-anchor="middle" font-size="14" fill="#333">Status: Unbalanced</text>
                    
                    <!-- Arrow left -->
                    <path d="M 650 440 L 580 440" stroke="#11998e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    
                    <!-- User Decision -->
                    <rect x="350" y="390" width="230" height="100" fill="#FFE0B2" stroke="#E65100" stroke-width="3" rx="10"/>
                    <text x="465" y="420" text-anchor="middle" font-weight="bold" font-size="16" fill="#BF360C">User Decision</text>
                    <text x="465" y="445" text-anchor="middle" font-size="14" fill="#333">‚òÄÔ∏è Balance with Solar</text>
                    <text x="465" y="470" text-anchor="middle" font-size="14" fill="#333">üí® Balance with Wind</text>
                    
                    <!-- Arrow left -->
                    <path d="M 350 440 L 280 440" stroke="#11998e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    
                    <!-- Auto-Adjust Engine -->
                    <rect x="50" y="390" width="230" height="100" fill="#E1F5FE" stroke="#0277BD" stroke-width="3" rx="10"/>
                    <text x="165" y="420" text-anchor="middle" font-weight="bold" font-size="16" fill="#01579B">Auto-Adjust Engine</text>
                    <text x="165" y="440" text-anchor="middle" font-size="13" fill="#333">Calculate Required</text>
                    <text x="165" y="460" text-anchor="middle" font-size="13" fill="#333">Land Use Change</text>
                    <text x="165" y="480" text-anchor="middle" font-size="13" fill="#333">(Solar or Wind)</text>
                    
                    <!-- Arrow down -->
                    <path d="M 165 490 L 165 560" stroke="#11998e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    
                    <!-- Update Land Use -->
                    <rect x="50" y="560" width="230" height="100" fill="#C8E6C9" stroke="#388E3C" stroke-width="3" rx="10"/>
                    <text x="165" y="590" text-anchor="middle" font-weight="bold" font-size="16" fill="#1B5E20">Update Land Use</text>
                    <text x="165" y="610" text-anchor="middle" font-size="14" fill="#333">Increase/Decrease</text>
                    <text x="165" y="630" text-anchor="middle" font-size="14" fill="#333">Solar or Wind Land</text>
                    <text x="165" y="650" text-anchor="middle" font-size="14" fill="#333">in Database</text>
                    
                    <!-- Arrow right -->
                    <path d="M 280 610 L 350 610 L 350 150" stroke="#11998e" stroke-width="3" fill="none" marker-end="url(#arrowhead)" stroke-dasharray="10,5"/>
                    <text x="320" y="380" font-size="13" fill="#11998e" font-weight="bold">Recalculate ‚Üª</text>
                    
                    <!-- Final Result -->
                    <rect x="450" y="560" width="230" height="100" fill="#A5D6A7" stroke="#2E7D32" stroke-width="3" rx="10"/>
                    <text x="565" y="590" text-anchor="middle" font-weight="bold" font-size="18" fill="#1B5E20">‚úÖ BALANCED!</text>
                    <text x="565" y="615" text-anchor="middle" font-size="14" fill="#333">Supply = Demand</text>
                    <text x="565" y="635" text-anchor="middle" font-size="14" fill="#333">100% Renewable</text>
                    <text x="565" y="655" text-anchor="middle" font-size="14" fill="#333">by 2045</text>
                    
                    <!-- Arrow from Bilanz to Final -->
                    <path d="M 750 490 L 750 610 L 680 610" stroke="#2E7D32" stroke-width="3" fill="none" marker-end="url(#arrowhead2)"/>
                    
                    <!-- Arrow definitions -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <polygon points="0 0, 10 3, 0 6" fill="#11998e"/>
                        </marker>
                        <marker id="arrowhead2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <polygon points="0 0, 10 3, 0 6" fill="#2E7D32"/>
                        </marker>
                    </defs>
                </svg>
            </div>
        </div>
        
        <!-- EXAMPLE SCENARIO -->
        <div class="highlight-box" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
            <div class="highlight-title">üìñ Real Example Scenario</div>
            <div class="highlight-text" style="text-align: left; max-width: 900px; margin: 0 auto;">
                <strong>Initial State (2024):</strong><br>
                ‚Ä¢ Total Demand: 80,000 MWh<br>
                ‚Ä¢ Renewable Supply: 60,000 MWh (75%)<br>
                ‚Ä¢ Status: <span style="background: rgba(255,255,255,0.3); padding: 5px 10px; border-radius: 5px;">‚ö†Ô∏è Unbalanced - 20,000 MWh deficit</span><br><br>
                
                <strong>User Action:</strong><br>
                ‚Ä¢ User increases industrial demand to 90,000 MWh (preparing for EV charging infrastructure)<br>
                ‚Ä¢ Now deficit is 30,000 MWh<br><br>
                
                <strong>User Clicks "Balance with Solar" ‚òÄÔ∏è:</strong><br>
                ‚Ä¢ System calculates: Need ~200 hectares more solar panels<br>
                ‚Ä¢ Updates land use code 222.1: 500 ha ‚Üí 700 ha<br>
                ‚Ä¢ Recalculates solar production<br>
                ‚Ä¢ New renewable supply: 90,000 MWh<br><br>
                
                <strong>Final Result:</strong><br>
                <span style="background: rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 10px; font-size: 22px;">‚úÖ BALANCED: 90,000 MWh = 90,000 MWh (100% Renewable!)</span>
            </div>
        </div>
        
        <!-- TECHNICAL IMPLEMENTATION -->
        <div class="flow-section">
            <div class="flow-title">
                <span>üõ†Ô∏è</span>
                Technical Implementation Details
            </div>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-title">üìÇ Database Tables Involved</div>
                    <div class="feature-desc">
                        ‚Ä¢ <code>simulator_verbrauchdata</code> - Demand values<br>
                        ‚Ä¢ <code>simulator_landuse</code> - Land use hectares<br>
                        ‚Ä¢ <code>simulator_renewabledata</code> - Supply formulas<br>
                        ‚Ä¢ <code>simulator_scenarios</code> - Saved scenarios
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">‚öôÔ∏è Key Functions Needed</div>
                    <div class="feature-desc">
                        ‚Ä¢ <code>calculate_total_demand()</code><br>
                        ‚Ä¢ <code>calculate_total_supply()</code><br>
                        ‚Ä¢ <code>get_balance_status()</code><br>
                        ‚Ä¢ <code>auto_adjust_solar_land(deficit)</code><br>
                        ‚Ä¢ <code>auto_adjust_wind_land(deficit)</code>
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">üé® UI Components</div>
                    <div class="feature-desc">
                        ‚Ä¢ Editable input fields for demand<br>
                        ‚Ä¢ Editable input fields for land use<br>
                        ‚Ä¢ Balance status dashboard<br>
                        ‚Ä¢ Solar/Wind balance buttons<br>
                        ‚Ä¢ Real-time charts
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">üî¢ Formulas & Constants</div>
                    <div class="feature-desc">
                        ‚Ä¢ Solar efficiency: 150 kWh/m¬≤/year<br>
                        ‚Ä¢ Wind capacity factor: 25%<br>
                        ‚Ä¢ Turbine capacity: 3 MW<br>
                        ‚Ä¢ Land per turbine: 0.5 ha<br>
                        ‚Ä¢ All configurable in settings
                    </div>
                </div>
            </div>
        </div>
        
        <!-- BENEFITS -->
        <div class="flow-section" style="background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);">
            <div class="flow-title" style="color: #006064;">
                <span>üéØ</span>
                Benefits of This System
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                <div>
                    <h3 style="color: #00695C;">For Policy Makers:</h3>
                    <ul style="line-height: 2;">
                        <li>‚úÖ Test different demand scenarios</li>
                        <li>‚úÖ See land use implications instantly</li>
                        <li>‚úÖ Plan realistic 2045 targets</li>
                        <li>‚úÖ Compare solar vs wind strategies</li>
                        <li>‚úÖ Make data-driven decisions</li>
                    </ul>
                </div>
                <div>
                    <h3 style="color: #00695C;">For Researchers:</h3>
                    <ul style="line-height: 2;">
                        <li>‚úÖ Model various scenarios quickly</li>
                        <li>‚úÖ Understand supply-demand dynamics</li>
                        <li>‚úÖ Validate theoretical models</li>
                        <li>‚úÖ Export data for further analysis</li>
                        <li>‚úÖ Publish findings with confidence</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 30px; text-align: center; padding: 30px; background: #f5f5f5; border-radius: 15px;">
            <h2 style="color: #11998e; margin-bottom: 15px;">üöÄ Ready to Build!</h2>
            <p style="font-size: 18px; color: #666; line-height: 1.8;">
                This intelligent balancing system will make your energy simulation webapp a powerful tool<br>
                for planning Germany's transition to <strong>100% renewable energy by 2045</strong>! üåç‚ö°
            </p>
        </div>
    </div>
</body>
</html>